<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Timer</title>

</head>

<body>

    <div>
        <h1 class="Titles">Real Time Task</h1>
    </div>
     <!-- Button trigger modal -->
    <button type="button" class= "btn-circle" data-toggle="modal" data-target="#exampleModal"></button>
   
 
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New task</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div>Name task<br><input id="name" type="text" size="40"></div>
            <div>Description<br><input id="description"type="text" size="40"></div>
            <div>Time<br><input id="time" type="time" name="cron" value="03:15"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button id= "close" type="button" class="btn btn-primary"  onclick="add()">Add</button>
        </div>
      </div>
    </div>
  </div>
  <script>
var task = {};
function add(){
    var name = document.getElementById("name");
    var description = document.getElementById("description");
    if (name.value=="" || description.value=="") {alert("Not text in input");return 301}
    document.getElementById("close").setAttribute("data-dismiss","modal");
    
    task.name =name.value;
    task.description =  description.value;
    task.timer=0;
    task.time = document.getElementById("time").value+":00";
    name.value="";
    description.value="";
    console.log(task);
    startTimer();
}
var time
function startTimer() {
    if  (task.timer ==0) {time=task.time; task.timer=1;}
    else time= document.getElementById("Time").innerHTML;
    var arr = time.split(":");
    var h = arr[0];
    var m = arr[1];
    var s = arr[2];
    if (s == 0) {
      if (m == 0) {
          alert("End time");
          window.location.reload();
          return;   
        m = 60;
        if (h < 10) h = "0" + h;
      }
      m--;
      if (m < 10) m = "0" + m;
      s = 59;
    }
    else s--;
    console.log(s);
    if (s < 10) s = "0" + s;
    document.getElementById("Time").innerHTML = h+":"+m+":"+s;
    setTimeout(startTimer, 1000);
  }
  </script>
    <div id="Time" class="Time">
        <p class="Time">TIME</p>
    </div>
    
    
    <div class="CurrentTask">
        <a>Date</a>
        <a>Text</a>
        <a>Finish Date</a>
    </div>
    <table id="Task">

    </table>
    
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
        
</body>

</html>